<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/layout::setContent(~{::content})}">
    <th:block th:fragment = "content">
        <!-- 메인 시작 -->

        <div class="pcoded-content">
            <!-- [ breadcrumb ] start -->

            <!-- [ breadcrumb ] end -->
            <!-- 본문내용 시작 -->
            <div class="card">
                <div class="card-body">
                    <h5 class="card-header">조달계획등록</h5>
                    <div class="card-body table-border-style">
                        <button type="button" class="btn btn-primary btn-sm" style="float:right;">조달계획등록</button>
                        <button type="button" class="btn btn-danger btn-sm" style="float:right;">리스트에서제거</button>
                        <div class="table-responsive">
                            <table id="table1" class="table table-bordered table-sm" width="100%">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>품목코드</th>
                                    <th>품목명</th>
                                    <th>소요수량</th>
                                    <th>재고수량</th>
                                    <th>조달수량</th>
                                    <th>평균반품율</th>
                                    <th>소요예정일</th>
                                    <th>조달납기일</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td align="center" valign="middle"><input type="checkbox" class="checkbox"></td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <nav>
                        <ul class="pagination">
                            <li class="page-item disabled"><span class="page-link">이전</span></li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item active"><span class="page-link">2<span class="sr-only">현재</span></span></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><span class="page-link">다음</span></li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-header">조달계획관리</h5>
                    <div class="card-body table-border-style">
                        <select name="검색항목" class="btn btn-outline-primary dropdown-toggle dropdown-toggle-split btn-sm" style="float:left;">
                            <option value="">선택</option>
                            <option value="품목코드">품목코드</option>
                            <option value="품목명">품목명</option>
                        </select>
                        <input type="text" class="form-control-sm" aria-label="Text input with dropdown button" style="float:left; width:20%; height:31px;">
                        <button class="btn btn-primary btn-sm" type="button" style="float:left;">검색</button>
                        <button type="button" class="btn  btn-primary btn-sm" style="float:right;" onclick="moveSelectedRows()">리스트에추가</button>
                        <button type="button" class="btn  btn-danger btn-sm" style="float:right;">미완료건만보기</button>
                        <button type="button" class="btn  btn-primary btn-sm" style="float:right;">전체보기</button>
                        <div class="table-responsive">
                            <table id="table2" class="table table-bordered table-sm" width="100%">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>품목코드</th>
                                    <th>품목명</th>
                                    <th>소요수량</th>
                                    <th>소요예정일</th>
                                    <th>조달납기일</th>
                                    <th>진행단계</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td align="center" valign="middle"><input type="checkbox" class="checkbox"></td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">00000</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">조달미예정</td>
                                </tr>
                                <tr>
                                    <td align="center" valign="middle"><input type="checkbox" class="checkbox"></td>
                                    <td align="center" valign="middle">11111</td>
                                    <td align="center" valign="middle">11111</td>
                                    <td align="center" valign="middle">11111</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">조달완료</td>
                                </tr>
                                <tr>
                                    <td align="center" valign="middle"><input type="checkbox" class="checkbox"></td>
                                    <td align="center" valign="middle">22222</td>
                                    <td align="center" valign="middle">22222</td>
                                    <td align="center" valign="middle">22222</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">조달준비완료</td>
                                </tr><tr>
                                    <td align="center" valign="middle"><input type="checkbox" class="checkbox"></td>
                                    <td align="center" valign="middle">44444</td>
                                    <td align="center" valign="middle">44444</td>
                                    <td align="center" valign="middle">44444</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">0000-00-00</td>
                                    <td align="center" valign="middle">조달진행중</td>
                                </tr>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <nav>
                        <ul class="pagination">
                            <li class="page-item disabled"><span class="page-link">이전</span></li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item active"><span class="page-link">2<span class="sr-only">현재</span></span></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><span class="page-link">다음</span></li>
                        </ul>
                    </nav>
                </div>
            </div>
            <!-- 본문내용 종료 -->
        </div>

        <!-- 메인 종료 -->

        <!-- 스크립트 -->
        <script>
            function changeProgress(progress) {
                  document.querySelector('.btn-outline-primary').innerHTML = progress + '<span class="sr-only"></span>';
        }

             function moveSelectedRows() {
              // Get all checkboxes in Table 1
              const checkboxes = document.querySelectorAll('#table2 .checkbox:checked');

              // Reference to Table 2's tbody
              const table1Body = document.querySelector('#table1 tbody');

              checkboxes.forEach(checkbox => {
                // Get the closest row of the checked checkbox
                const row = checkbox.closest('tr');

                // Check if the row has already been moved
                if (!row.classList.contains('moved')) {
                  // Clone the row
                  const clonedRow = row.cloneNode(true);

                  // Remove the checkbox from the cloned row
                  clonedRow.querySelector('.checkbox').remove();

                  // Append the cloned row to Table 2
                  table1Body.appendChild(clonedRow);

                  // Mark the original row as moved
                  row.classList.add('moved');

                  // Optional: Uncheck the checkbox in Table 1
                  checkbox.checked = false;
                }
              });
            }


        </script>
        <script>
            // JavaScript를 사용하여 각 셀의 값을 확인하고 배경색을 조절
            const table = document.getElementById('table2');
            const rows = table.getElementsByTagName('tr');

            for (let i = 1; i < rows.length; i++) {
              const cells = rows[i].getElementsByTagName('td');
              const statusValue = cells[6].textContent.trim();

              switch (statusValue) {
                case '조달완료':
                  cells[6].style.backgroundColor = '#00ff00'; // 녹색
                  break;
                case '조달진행중':
                  cells[6].style.backgroundColor = '#ffff00'; // 노란색
                  break;
                case '조달준비완료':
                  cells[6].style.backgroundColor = '#ffc000'; // 주황색
                  break;
                case '조달미예정':
                  cells[6].style.backgroundColor = '#ff0000'; // 빨간색
                  break;
                default:
                  break;
              }
            }
        </script>
    </th:block>
</th:block>
</html>

